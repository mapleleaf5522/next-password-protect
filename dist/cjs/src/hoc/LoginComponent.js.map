{"version":3,"file":"LoginComponent.js","sources":["../../../../src/hoc/LoginComponent.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\nexport interface LoginComponentProps {\n  apiUrl?: string;\n  backUrl?: string;\n  /* @default #01EDBC */\n  buttonBackgroundColor?: string;\n  /* @default #111 */\n  buttonColor?: string;\n  logo?: string;\n}\n\nexport const LoginComponent = ({\n  apiUrl,\n  backUrl,\n  buttonBackgroundColor,\n  buttonColor,\n  logo,\n}: LoginComponentProps) => {\n  const [isBusy, setBusy] = useState(false);\n  const [error, setError] = useState('');\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (isBusy) {\n      return;\n    }\n\n    setBusy(true);\n    setError('');\n\n    try {\n      const form = document.querySelector(\n        '#password-form form',\n      ) as HTMLFormElement;\n\n      const formData = new FormData(form);\n\n      const res = await fetch(apiUrl || `/api/login`, {\n        method: 'post',\n        credentials: 'include',\n        body: JSON.stringify({ password: formData.get('password') }),\n        headers: { 'Content-Type': 'application/json' },\n      });\n\n      const { message } = await res.json();\n\n      if (res.status === 200) {\n        window.location.reload();\n      } else {\n        setError(message);\n        setBusy(false);\n      }\n    } catch (e) {\n      setError('An error has occured.');\n      setBusy(false);\n    }\n\n    return false;\n  };\n\n  const image = !!logo && (\n    <img\n      width=\"130\"\n      height=\"auto\"\n      src={logo}\n      alt=\"Logo\"\n      style={{ marginBottom: '40px' }}\n    />\n  );\n\n  return (\n    <div\n      style={{\n        backgroundColor: '#fff',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        maxWidth: '100vw',\n        minHeight: '100vh',\n        width: '100%',\n        overflowX: 'hidden',\n      }}\n    >\n      <div\n        style={{\n          maxWidth: '100%',\n          display: 'flex',\n          flex: 1,\n          width: '100%',\n          padding: '32px 16px',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <style\n          dangerouslySetInnerHTML={{\n            __html: `\n            @import url('https://fonts.googleapis.com/css2?family=Karla&display=swap');\n\n            @font-face {\n              font-family: 'Filson W01';\n              src: url('data:application/font-woff2;charset=utf-8;base64,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') format('woff2');\n              font-weight: 900;\n              font-style: normal;\n              font-display: swap;\n            }\n\n            body {\n              margin: 0;\n            }\n\n            * {\n              box-sizing: border-box;\n            }\n\n            .link {\n              font-family: 'Karla', sans-serif;\n              font-style: normal;\n              text-decoration: none;\n              color: #666;\n              transition: color 0.2s ease-out;\n            }\n\n            .link:hover, .link:focus {\n              color: #111;\n            }\n\n            #password-form * {\n              font-family: 'Karla', sans-serif;\n            }\n\n            #password-form h1 {\n              font-family: 'Filson W01', sans-serif;\n            }\n\n            #password-form {\n              padding: 40px;\n            }\n\n            @media (max-width: 767px) {\n              #password-form {\n                padding: 32px 16px;\n              }\n            }\n\n            #password-form .invalid {\n              outline: auto 1px;\n              outline-color: #DD4A4A;\n              animation: shake .4s linear;\n            }\n\n            #password-form .error {\n              color: #DD4A4A;\n              margin-top: 12px;\n              font-size: 18px;\n            }\n\n            @keyframes shake {\n              8%, 41% {\n                transform: translateX(-10px);\n              }\n              25%, 58% {\n                transform: translateX(10px);\n              }\n              75% {\n                transform: translateX(-5px);\n              }\n              92% {\n                transform: translateX(5px);\n              }\n              0%, 100% {\n                transform: translateX(0);\n              }\n            }\n          `,\n          }}\n        />\n\n        {!!image && <>{backUrl ? <a href={backUrl}>{image}</a> : image}</>}\n        <div\n          id=\"password-form\"\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'flex-start',\n            justifyContent: 'flex-start',\n            boxShadow: '0px 15px 40px rgba(26, 30, 43, 0.13)',\n            borderRadius: '8px',\n            width: '420px',\n            maxWidth: '100%',\n            marginBottom: '48px',\n          }}\n        >\n          <h1 style={{ margin: '0 0 24px', color: '#111' }}>Login</h1>\n          <form\n            data-testid=\"form\"\n            onSubmit={onSubmit}\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n              width: '100%',\n            }}\n          >\n            <label\n              htmlFor=\"password\"\n              style={{\n                color: '#525252',\n                fontSize: '18px',\n                marginBottom: '8px',\n              }}\n            >\n              Password\n            </label>\n            <input\n              className={error ? 'invalid' : ''}\n              name=\"password\"\n              type=\"password\"\n              id=\"password\"\n              placeholder=\"Enter password...\"\n              required\n              style={{\n                background: '#F5F5F5',\n                borderRadius: '4px',\n                padding: '0 16px',\n                fontSize: '18px',\n                color: '#525252',\n                border: 'none',\n                height: '48px',\n              }}\n            />\n            {!!error && (\n              <div className=\"error\" data-testid=\"error\">\n                {error}\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isBusy}\n              style={{\n                appearance: 'none',\n                background: buttonBackgroundColor || '#01EDBC',\n                borderRadius: '52px',\n                border: 'none',\n                padding: '12px 32px',\n                fontSize: '20px',\n                color: buttonColor || '#111',\n                marginTop: '32px',\n                cursor: 'pointer',\n                textAlign: 'center',\n              }}\n            >\n              {isBusy ? 'Logging in...' : 'Login'}\n            </button>\n          </form>\n        </div>\n        {!!backUrl && (\n          <a href={backUrl} className=\"link\">\n            ‚Üê Back to main website\n          </a>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":["_a","apiUrl","backUrl","buttonBackgroundColor","buttonColor","logo","_b","useState","isBusy","setBusy","_c","error","setError","image","React","width","height","src","alt","style","marginBottom","backgroundColor","display","flexDirection","alignItems","justifyContent","maxWidth","minHeight","overflowX","flex","padding","dangerouslySetInnerHTML","__html","href","id","boxShadow","borderRadius","margin","color","onSubmit","e","preventDefault","stopPropagation","form","document","querySelector","formData","FormData","fetch","method","credentials","body","JSON","stringify","password","get","headers","res","json","message","status","window","location","reload","htmlFor","fontSize","className","name","type","placeholder","required","background","border","disabled","appearance","marginTop","cursor","textAlign"],"mappings":"wPAY8B,SAACA,OAC7BC,WACAC,YACAC,0BACAC,gBACAC,SAEMC,EAAoBC,YAAS,GAA5BC,OAAQC,OACTC,EAAoBH,WAAS,IAA5BI,OAAOC,OA2CRC,IAAUR,GACdS,+BACEC,MAAM,MACNC,OAAO,OACPC,IAAKZ,EACLa,IAAI,OACJC,MAAO,CAAEC,aAAc,iBAKzBN,+BACEK,MAAO,CACLE,gBAAiB,OACjBC,QAAS,OACTC,cAAe,SACfC,WAAY,SACZC,eAAgB,SAChBC,SAAU,QACVC,UAAW,QACXZ,MAAO,OACPa,UAAW,WAGbd,+BACEK,MAAO,CACLO,SAAU,OACVJ,QAAS,OACTO,KAAM,EACNd,MAAO,OACPe,QAAS,YACTP,cAAe,SACfC,WAAY,SACZC,eAAgB,WAGlBX,iCACEiB,wBAAyB,CACvBC,OAAQ,0sIAkFTnB,GAASC,gDAAGZ,EAAUY,6BAAGmB,KAAM/B,GAAUW,GAAaA,GACzDC,+BACEoB,GAAG,gBACHf,MAAO,CACLG,QAAS,OACTC,cAAe,SACfC,WAAY,aACZC,eAAgB,aAChBU,UAAW,uCACXC,aAAc,MACdrB,MAAO,QACPW,SAAU,OACVN,aAAc,SAGhBN,8BAAIK,MAAO,CAAEkB,OAAQ,WAAYC,MAAO,kBACxCxB,8CACc,OACZyB,SAnLO,SAAOC,oIACtBA,EAAEC,iBACFD,EAAEE,kBAEElC,YAIJC,GAAQ,GACRG,EAAS,kDAGD+B,EAAOC,SAASC,cACpB,uBAGIC,EAAW,IAAIC,SAASJ,MAEZK,MAAM/C,GAAU,aAAc,CAC9CgD,OAAQ,OACRC,YAAa,UACbC,KAAMC,KAAKC,UAAU,CAAEC,SAAUR,EAASS,IAAI,cAC9CC,QAAS,gBAAkB,wCAJvBC,EAAMzD,UAOkB0D,sBAAtBC,EAAY3D,iBAED,MAAfyD,EAAIG,OACNC,OAAOC,SAASC,UAEhBnD,EAAS+C,GACTlD,GAAQ,iCAGVG,EAAS,yBACTH,GAAQ,0BAGH,WA8ICU,MAAO,CACLG,QAAS,OACTC,cAAe,SACfR,MAAO,SAGTD,iCACEkD,QAAQ,WACR7C,MAAO,CACLmB,MAAO,UACP2B,SAAU,OACV7C,aAAc,oBAKlBN,iCACEoD,UAAWvD,EAAQ,UAAY,GAC/BwD,KAAK,WACLC,KAAK,WACLlC,GAAG,WACHmC,YAAY,oBACZC,YACAnD,MAAO,CACLoD,WAAY,UACZnC,aAAc,MACdN,QAAS,SACTmC,SAAU,OACV3B,MAAO,UACPkC,OAAQ,OACRxD,OAAQ,YAGTL,GACDG,+BAAKoD,UAAU,sBAAoB,SAChCvD,GAILG,kCACEsD,KAAK,SACLK,SAAUjE,EACVW,MAAO,CACLuD,WAAY,OACZH,WAAYpE,GAAyB,UACrCiC,aAAc,OACdoC,OAAQ,OACR1C,QAAS,YACTmC,SAAU,OACV3B,MAAOlC,GAAe,OACtBuE,UAAW,OACXC,OAAQ,UACRC,UAAW,WAGZrE,EAAS,gBAAkB,aAI/BN,GACDY,6BAAGmB,KAAM/B,EAASgE,UAAU"}